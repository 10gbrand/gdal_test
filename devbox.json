{
  "packages": [
    "python@3.13",
    "uv",
    "gdal",
    "duckdb",
    "git",
    "gnumake",
    "dbeaver@latest",
    "go-task@latest",
    "tree@latest",
    "unzip",
    "libaio"
  ],
"shell": {
  "init_hook": [
    "echo 'ðŸš€ Initializing Python environment via uv and pyproject.toml...'",
    
    "if [ ! -d .venv ]; then uv venv .venv --python 3.13; fi",
    "source .venv/bin/activate",
    
    "uv sync --dev",
    
    "if [ ! -d instantclient/instantclient_19_28 ]; then",
    "  echo 'ðŸ“¦ Extracting Oracle Instant Client...';",
    "  mkdir -p instantclient && unzip -q instantclient-basic-linux.x64-19.28.0.0.0dbru.zip -d instantclient;",
    "fi",
    
    "LIBAIO_PATH=$(nix eval --raw nixpkgs#libaio.outPath)/lib/libaio.so.1",
    "mkdir -p ./instantclient/instantclient_19_28",
    "if [ ! -L ./instantclient/instantclient_19_28/libaio.so.1 ]; then",
    "  echo 'ðŸ”— Linking libaio.so.1 from nix store...';",
    "  ln -sf $LIBAIO_PATH ./instantclient/instantclient_19_28/libaio.so.1;",
    "fi",
    
    "export LD_LIBRARY_PATH=$PWD/instantclient/instantclient_19_28:$LD_LIBRARY_PATH",
    "export ORACLE_HOME=$PWD/instantclient/instantclient_19_28",
    "export PATH=$ORACLE_HOME:$PATH"
  ],

  "env": {
    "PYTHONPATH": ".",
    "UV_PIP_RESOLVER": "modern",
    "LD_LIBRARY_PATH": "./instantclient/instantclient_19_28:/nix/store/dzlnx399b7cvsy160328m62zfrxj4srg-libaio-0.3.113/lib"
  }
}
,
  "devbox": {
    "version": "1.0",
    "features": {
      "auto_venv": true,
      "python": {
        "use_uv": true
      }
    }
  },
  "description": "Jetify Devbox + uv environment for data pipelines (DuckDB, DLT, Streamlit, FastAPI, dev tools + Oracle)"
}

